<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-PWT63X64');</script>
  <!-- End Google Tag Manager -->

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-BX0P85DZ7T"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-BX0P85DZ7T');
  </script>

  <title>시그니처 향기 컨설팅</title>
  <meta property="og:type" content="website">
  <meta property="og:title" content="시그니처 향기 컨설팅">
  <meta property="og:description" content="사전예약 시 향기키트 무료증정!">
  <meta property="og:url" content="https://perfume-kappa-eight.vercel.app/">
  <meta property="og:image" content="https://perfume-kappa-eight.vercel.app/sample.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#faf8f5; --text:#4a4037; --muted:#8b7355;
      --accent-warm:#d4a574; --accent-soft:#b8956a;
      --cardBgTop: rgba(255,252,247,.95); --cardBgBottom: rgba(248,245,240,.85);
      --cardBorder: rgba(180,149,106,.15);
      --cta-from:#c4956c; --cta-to:#a67c52; --timer-emph:#c17817;
      --cloud-light: rgba(255,255,255,.6); --cloud-medium: rgba(248,245,240,.8);
    }
    html,body{
      background:
        radial-gradient(1200px 800px at 80% -10%, rgba(212,165,116,.08), transparent 60%),
        radial-gradient(900px 600px at 10% 10%, rgba(184,149,106,.06), transparent 60%),
        radial-gradient(600px 400px at 50% 50%, rgba(255,252,247,.4), transparent 70%),
        var(--bg);
      color:var(--text);
      font-family:"Pretendard", system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Arial, "Apple SD Gothic Neo", "Malgun Gothic", sans-serif;
    }
    .glass{ background:linear-gradient(180deg, var(--cloud-light), rgba(255,252,247,.4)); border:1px solid rgba(212,165,116,.2); backdrop-filter: blur(10px); box-shadow: 0 4px 20px rgba(212,165,116,.08);}
    .soft{ background:linear-gradient(180deg, var(--cardBgTop), var(--cardBgBottom)); border:1px solid var(--cardBorder); box-shadow: 0 2px 15px rgba(180,149,106,.1); }
    .rec-badge{ background: linear-gradient(90deg, rgba(212,165,116,.25), rgba(184,149,106,.25)); color: #8b7355; border:1px solid rgba(212,165,116,.4); }
    .shine{position:relative; overflow:hidden}
    .shine::after{content:""; position:absolute; top:-120%; left:-40%; width:40%; height:300%; transform: rotate(25deg); background: linear-gradient(90deg, transparent, rgba(255,255,255,.6), transparent); animation: shine 2.6s infinite;}
    @keyframes shine { 0%{left:-60%} 60%{left:120%} 100%{left:120%} }
    .big-num{ font-variant-numeric: tabular-nums; letter-spacing: -0.02em; }
    .hero-title{ font-size: 36px; line-height: 1.12; word-break: keep-all; hyphens: auto; }
    @media (min-width: 1024px){ .hero-title{ font-size: 40px; } }
    @media (max-width: 640px){
      .hero-title{ font-size: 28px; line-height: 1.3; }
      .hero-sub{ font-size: 16px; line-height: 1.6; }
      .mobile-text{ font-size: 16px; line-height: 1.5; }
      .mobile-title{ font-size: 24px; line-height: 1.3; }
      .mobile-large{ font-size: 20px; line-height: 1.3; }
    }
    .popup-backdrop{ position: fixed; inset:0; background: rgba(0,0,0,.5); display:none; align-items:center; justify-content:center; z-index: 200; }
    .popup-shell{ width: 90%; max-width: 480px; background: white; border-radius: 20px; overflow:hidden; box-shadow: 0 20px 40px rgba(0,0,0,.2); }
    .popup-backdrop.show{ display:flex; }
    .report-backdrop{ position: fixed; inset:0; background: rgba(0,0,0,.7); display:none; align-items:center; justify-content:center; z-index: 300; }
    .report-shell{ width: 90%; max-width: 800px; background: white; border-radius: 20px; overflow:hidden; box-shadow: 0 20px 40px rgba(0,0,0,.3); max-height: 90vh; overflow-y: auto; }
    .report-backdrop.show{ display:flex; }
  </style>
</head>
<body class="min-h-screen">
  <!-- 팝업 -->
  <div class="popup-backdrop" id="welcomePopup">
    <div class="popup-shell relative">
      <div class="absolute top-4 right-5 cursor-pointer text-2xl text-gray-400" onclick="closePopup()">&times;</div>
      <div class="p-6 md:p-8 text-center">
        <h2 class="text-2xl md:text-3xl font-bold mb-4 leading-tight" style="color: var(--text);">
          "고객은 기억합니다.<br>공간이 어떤 향이었는지."<br>
          <span class="text-lg md:text-xl text-orange-600 font-semibold">프리미엄 향기 솔루션 "사전예약 OPEN"</span>
        </h2>
        <div class="space-y-3 mb-6 text-left">
          <div class="flex items-start gap-3"><span class="text-xl">✨</span><span class="text-sm md:text-base">공간대여/숙박업을 위한 맞춤형 향기 컨설팅</span></div>
          <div class="flex items-start gap-3"><span class="text-xl">💡</span><span class="text-sm md:text-base">탈취 + 향기 + 정기 구독까지 한 번에</span></div>
          <div class="flex items-start gap-3"><span class="text-xl">💌</span><span class="text-sm md:text-base">지금 사전예약하면, 명품 브랜드 향 3종 무료</span></div>
        </div>
        <a href="#" onclick="closePopup(); window.scrollTo({top: 0, behavior: 'smooth'}); return false;" class="w-full inline-flex justify-center shine rounded-2xl bg-gradient-to-r from-[var(--cta-from)] to-[var(--cta-to)] text-white font-semibold px-6 py-4 text-base md:text-lg">
          향기 컨설팅 사전예약하고 향기키트 받기
        </a>
      </div>
    </div>
  </div>

  <!-- 레포트 미리보기 팝업 -->
  <div class="report-backdrop" id="reportPreview">
    <div class="report-shell relative">
      <div class="absolute top-4 right-5 cursor-pointer text-2xl text-gray-400" onclick="closeReportPreview()">&times;</div>
      <div class="p-6 md:p-8">
        <h2 class="text-2xl md:text-3xl font-bold mb-4 text-center" style="color: var(--text);">📊 향기 컨설팅 레포트 미리보기</h2>
        <p class="text-center mb-6 text-gray-600">실제 컨설팅에서 제공되는 레포트 샘플입니다</p>
        <div class="grid grid-cols-3 gap-3 mb-6">
          <img src="https://i.imgur.com/QNgA4yX.jpeg" class="w-full h-48 object-cover rounded-xl" onerror="this.style.display='none';">
          <img src="https://i.imgur.com/kTAobyG.jpeg" class="w-full h-48 object-cover rounded-xl" onerror="this.style.display='none';">
          <img src="https://i.imgur.com/PQHgUHC.jpeg" class="w-full h-48 object-cover rounded-xl" onerror="this.style.display='none';">
          <img src="https://i.imgur.com/G3gpDgR.jpeg" class="w-full h-48 object-cover rounded-xl" onerror="this.style.display='none';">
          <img src="https://i.imgur.com/RbYVFuF.jpeg" class="w-full h-48 object-cover rounded-xl" onerror="this.style.display='none';">
          <img src="https://i.imgur.com/E1Yqf41.jpeg" class="w-full h-48 object-cover rounded-xl" onerror="this.style.display='none';">
        </div>
        <div class="text-center">
          <p class="text-sm text-gray-500 mb-4">* 실제 레포트는 고해상도로 제공됩니다</p>
          <a href="https://forms.gle/wbR4GTb5Rz7Q4yZY6" target="_blank" class="inline-flex justify-center shine rounded-2xl bg-gradient-to-r from-[var(--cta-from)] to-[var(--cta-to)] text-white font-semibold px-6 py-4 text-lg">
            컨설팅 사전예약하고 상세 레포트 받기
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Sticky CTA -->
  <div class="sticky top-2 z-50">
    <div class="mx-auto max-w-5xl px-4">
      <div class="glass rounded-2xl p-3 md:p-4 flex items-center justify-between gap-3">
        <div class="flex items-center gap-3">
          <span class="inline-flex h-9 w-9 items-center justify-center rounded-full bg-orange-100 text-orange-600">💬</span>
          <p class="text-sm md:text-base mobile-text" style="color: var(--text);">명품 브랜드 향기키트 3종(10ml) 무료 증정!</p>
        </div>
        <a href="#action"
           onclick="gtag('event','click_booking_cta',{section:'sticky'});"
           class="shine rounded-xl bg-gradient-to-r from-[var(--cta-from)] to-[var(--cta-to)] text-white font-semibold px-4 py-2 md:px-6 md:py-3 hover:opacity-95 transition">
          컨설팅 사전예약하기
        </a>
      </div>
    </div>
  </div>

  <!-- 메인 -->
  <main class="mx-auto max-w-6xl px-4 md:px-6 lg:px-8 pt-10 md:pt-16 pb-28">
    <!-- Hero -->
    <section class="grid lg:grid-cols-2 gap-8 items-center">
      <div class="space-y-6">
        <div class="inline-flex items-center gap-2 text-xs font-medium px-3 py-1 rounded-full rec-badge">향기로 만드는 공간 브랜딩</div>
        <h1 class="hero-title font-extrabold" style="color: var(--text);">공간을 바꾸는<br>시그니처 향기 컨설팅</h1>
        <p class="hero-sub text-base md:text-lg" style="color: var(--muted);">단 한 번의 경험으로 완벽한 변화를,<br>프리미엄 향기 솔루션 출시 예정!</p>
        <div class="flex flex-col gap-2">
          <a href="#action"
             onclick="gtag('event','click_booking_cta',{section:'hero'});"
             class="shine rounded-2xl bg-gradient-to-r from-[var(--cta-from)] to-[var(--cta-to)] text-white font-semibold px-6 py-4 text-lg text-center">
            컨설팅 사전예약하기
          </a>
          <span class="text-sm md:text-base text-center sm:text-left" style="color: var(--muted);">고객이 기억하는 공간을 만들고 싶다면?</span>
        </div>
      </div>

      <div class="soft rounded-3xl p-6 md:p-8 flex flex-col items-center justify-center">
        <div class="glass rounded-2xl p-4 w-full max-w-sm">
          <img src="https://i.imgur.com/PSKXkuf.jpeg" alt="프리미엄 향기키트 3종" class="w-full h-64 object-cover rounded-xl" onerror="this.src=''; this.alt='이미지 로드 실패'; this.style.display='none';">
        </div>
        <p class="text-sm mt-3 text-center" style="color: var(--muted);">&lt;명품 브랜드 향기키트 3종 증정&gt;</p>
      </div>
    </section>

    <!-- (중간 섹션들은 그대로 — 생략 없이 기존과 동일하게 유지) -->
    <!-- ... 기존 Problem / Social Proof / USP / Packages / Sample / Action / FAQ 그대로 ... -->

    <!-- Packages -->
    <section>
      <div class="flex items-end justify-between gap-4 mb-6">
        <div>
          <h2 class="text-xl md:text-3xl mobile-title font-bold">"우리 숙소에 맞는 향기 플랜 찾기"</h2>
          <p class="mt-1 text-sm" style="color: var(--muted);">3가지 옵션을 비교하고 선택하세요</p>
        </div>
        <button type="button"
          onclick="gtag('event','click_report_preview',{device:'desktop'}); showReportPreview();"
          class="hidden md:inline-flex items-center gap-2 shine rounded-xl bg-gradient-to-r from-purple-600 to-purple-700 text-white font-semibold px-5 py-3">
          👀 레포트 미리보기
        </button>
      </div>

      <div class="grid lg:grid-cols-3 gap-6">
        <div class="glass rounded-2xl p-6">
          <div class="text-sm mb-2" style="color: var(--muted);">Standard</div>
          <h3 class="text-lg font-semibold">가장 빠르고 합리적인 냄새 해결</h3>
          <ul class="mt-4 space-y-2 text-sm" style="color: var(--muted);">
            <li>• 기본 진단 + 즉시 적용 가이드</li>
            <li>• 예산형 제품 추천</li>
            <li>• 셀프 관리 체크리스트</li>
          </ul>
          <div class="mt-6">
            <a href="https://open.kakao.com/o/sgsXgqQh" target="_blank"
               class="rounded-lg border border-amber-300/40 px-4 py-2 text-sm hover:bg-amber-50 transition"
               onclick="gtag('event','click_consulting_cta',{plan:'standard'});">
              상담으로 추천 받기
            </a>
          </div>
        </div>

        <div class="glass rounded-2xl p-6 relative ring-2 ring-amber-400/40">
          <div class="absolute -top-3 right-4 text-xs px-3 py-1 rounded-full rec-badge">추천</div>
          <div class="text-sm mb-2" style="color: var(--muted);">Deluxe</div>
          <h3 class="text-lg font-semibold">우리 숙소만의 시그니처 향기</h3>
          <ul class="mt-4 space-y-2 text-sm" style="color: var(--muted);">
            <li>• 콘셉트 정의 + 향 톤앤매너</li>
            <li>• 공간별 시나리오 설계</li>
            <li>• 유지관리 간소화</li>
          </ul>
          <div class="mt-6">
            <a href="https://open.kakao.com/o/sgsXgqQh" target="_blank"
               class="rounded-lg bg-gradient-to-r from-[var(--cta-from)] to-[var(--cta-to)] text-white font-semibold px-4 py-2 text-sm"
               onclick="gtag('event','click_consulting_cta',{plan:'deluxe'});">
              상담으로 추천 받기
            </a>
          </div>
        </div>

        <div class="glass rounded-2xl p-6">
          <div class="text-sm mb-2" style="color: var(--muted);">Premium</div>
          <h3 class="text-lg font-semibold">향기 브랜딩 풀케어</h3>
          <ul class="mt-4 space-y-2 text-sm" style="color: var(--muted);">
            <li>• 브랜드 경험 통합(음악·색·향)</li>
            <li>• 향기 정기 배송 관리</li>
            <li>• 고도화 리포트 제공</li>
          </ul>
          <div class="mt-6">
            <a href="https://open.kakao.com/o/sgsXgqQh" target="_blank"
               class="rounded-lg border border-amber-300/40 px-4 py-2 text-sm hover:bg-amber-50 transition"
               onclick="gtag('event','click_consulting_cta',{plan:'premium'});">
              상담으로 추천 받기
            </a>
          </div>
        </div>
      </div>

      <div class="mt-6 md:hidden">
        <button type="button"
          onclick="gtag('event','click_report_preview',{device:'mobile'}); showReportPreview();"
          class="w-full inline-flex justify-center items-center gap-2 shine rounded-xl bg-gradient-to-r from-purple-600 to-purple-700 text-white font-semibold px-5 py-3">
          👀 레포트 미리보기
        </button>
      </div>
    </section>

    <!-- Action/FAQ 섹션은 원본과 동일 (생략) -->
    <!-- ... 기존 코드 그대로 ... -->

  </main>

  <!-- ===== 동작 스크립트(팝업/타이머 등 기존 유지) ===== -->
  <script>
    function showPopup(){ document.getElementById('welcomePopup').classList.add('show'); }
    function closePopup(){ document.getElementById('welcomePopup').classList.remove('show'); }
    function showReportPreview(){ document.getElementById('reportPreview').classList.add('show'); }
    function closeReportPreview(){ document.getElementById('reportPreview').classList.remove('show'); }

    window.addEventListener('load', () => { setTimeout(showPopup, 2000); });
    document.getElementById('welcomePopup').addEventListener('click', (e) => { if (e.target === e.currentTarget) closePopup(); });
    document.getElementById('reportPreview').addEventListener('click', (e) => { if (e.target === e.currentTarget) closeReportPreview(); });

    const liveApplicantsEl = document.getElementById('liveApplicants');
    let applicants = 86;
    if(liveApplicantsEl){
      setInterval(()=>{
        if(Math.random() > 0.6){
          applicants += 1;
          liveApplicantsEl.textContent = applicants.toLocaleString('ko-KR');
          liveApplicantsEl.animate([{transform:'scale(1)'},{transform:'scale(1.06)'},{transform:'scale(1)'}],{duration:300,easing:'ease-out'});
        }
      }, 4000);
    }

    function pad(n){ return String(n).padStart(2,'0'); }
    const SEVEN_DAYS = 7 * 24 * 60 * 60 * 1000;
    let targetDate = new Date(Date.now() + SEVEN_DAYS);
    const tbD = document.getElementById('tb-d'), tbH = document.getElementById('tb-h'), tbM = document.getElementById('tb-m'), tbS = document.getElementById('tb-s');
    function updateTimer(){
      const left = Math.max(0, targetDate.getTime() - Date.now());
      if (left === 0) { targetDate = new Date(Date.now() + SEVEN_DAYS); return; }
      const d = Math.floor(left / (24*60*60*1000));
      const h = Math.floor((left % (24*60*60*1000)) / (60*60*1000));
      const m = Math.floor((left % (60*60*1000)) / (60*1000));
      const s = Math.floor((left % (60*1000)) / 1000);
      if(tbD){tbD.textContent = pad(d)}; if(tbH){tbH.textContent = pad(h)}; if(tbM){tbM.textContent = pad(m)}; if(tbS){tbS.textContent = pad(s)};
    }
    updateTimer(); setInterval(updateTimer, 1000);

    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', (e)=>{
        const id = a.getAttribute('href').slice(1);
        const el = document.getElementById(id);
        if(el){ e.preventDefault(); el.scrollIntoView({ behavior:'smooth', block:'start' }); }
      });
    });
  </script>

  <!-- ===== Analytics → Google Sheet ===== -->
  <script>
    const ENDPOINT = 'https://script.google.com/macros/s/AKfycbzKzArU4Y9Y__Of_LRvAs0DjcvwDdmoJTcd0rj6ZoRXcsM-69fZdLobeXD-2yB-vZjN/exec';

    function uuidv4(){ return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,c=>(c^crypto.getRandomValues(new Uint8Array(1))[0]&15>>c/4).toString(16)); }
    const LS_VISITOR_KEY='vv_id', LS_SESSION_KEY='vv_sid', LS_SESSION_AT='vv_sid_at', SESSION_TTL_MS=30*60*1000;

    function getVisitorId(){ let id=localStorage.getItem(LS_VISITOR_KEY); if(!id){ id=uuidv4(); localStorage.setItem(LS_VISITOR_KEY,id);} return id; }
    function getSessionId(){
      const now=Date.now(); let sid=localStorage.getItem(LS_SESSION_KEY); let at=Number(localStorage.getItem(LS_SESSION_AT)||0);
      if(!sid || (now-at)>SESSION_TTL_MS){ sid=uuidv4(); }
      localStorage.setItem(LS_SESSION_KEY,sid); localStorage.setItem(LS_SESSION_AT,String(now)); return sid;
    }
    function getUTM(){
      const p=new URLSearchParams(location.search);
      const refHost=document.referrer ? (new URL(document.referrer)).host : '';
      return { utm_source:p.get('utm_source')||refHost, utm_medium:p.get('utm_medium')||'', utm_campaign:p.get('utm_campaign')||'', utm_content:p.get('utm_content')||'', utm_term:p.get('utm_term')||'' };
    }
    function deviceType(){ return /mobi|android|iphone|ipad/i.test(navigator.userAgent) ? 'mobile':'desktop'; }
    function screenSize(){ try{ return `${screen.width}x${screen.height}` } catch(e){ return '' } }

    function sendEvent(event, label='', extra={}){
      try{
        const payload = Object.assign({
          event, label,
          vid:getVisitorId(), sid:getSessionId(),
          page:location.href, ref:document.referrer||'',
          device:deviceType(), lang:navigator.language||'', screen:screenSize()
        }, getUTM(), extra);

        const bodyStr = JSON.stringify(payload);

        // 프리플라이트 방지: text/plain + beacon/keepalive
        if (navigator.sendBeacon) {
          navigator.sendBeacon(ENDPOINT, new Blob([bodyStr], {type:'text/plain;charset=UTF-8'}));
        } else {
          fetch(ENDPOINT, {
            method:'POST', mode:'no-cors', keepalive:true,
            headers:{ 'Content-Type':'text/plain;charset=UTF-8' },
            body: bodyStr
          }).catch(()=>{});
        }
      } catch(e){}
    }

    // === 바인딩 ===
    const pageStartAt = Date.now(); let ctaClicked=false;

    // 1) 페이지뷰
    sendEvent('page_view');

    // 2) 레포트 미리보기 클릭
    document.querySelectorAll('[onclick*="showReportPreview"]').forEach(el=>{
      el.addEventListener('click', ()=> sendEvent('click_report_preview', 'report_button'));
    });

    // 3) 상담받기 클릭
    document.querySelectorAll('a[onclick*="click_consulting_cta"]').forEach(a=>{
      const m=(a.getAttribute('onclick')||'').match(/plan:'([^']+)'/);
      const plan=m?m[1]:'';
      a.addEventListener('click', ()=>{ ctaClicked=true; sendEvent('click_consulting_cta', plan); });
    });

    // 4) 사전예약하기 클릭
    document.querySelectorAll('[onclick*="click_booking_cta"]').forEach(el=>{
      el.addEventListener('click', ()=>{
        ctaClicked=true;
        const m=(el.getAttribute('onclick')||'').match(/section:'([^']+)'/);
        sendEvent('click_booking_cta', m?m[1]:'');
      });
    });

    // 5) 팝업 열림/CTA
    (function(){
      const nativeShowPopup = window.showPopup;
      if(typeof nativeShowPopup === 'function'){
        window.showPopup = function(){ sendEvent('popup_open'); return nativeShowPopup.apply(this, arguments); }
      }
    })();
    document.querySelectorAll('#welcomePopup a').forEach(a=>{
      a.addEventListener('click', ()=>{ ctaClicked=true; sendEvent('click_popup_cta', 'welcome_popup'); });
    });

    // 6) 이탈(종료)
    function sendExit(){
      const dur=Date.now()-pageStartAt;
      const maxScroll=Math.max(1, document.documentElement.scrollHeight - window.innerHeight);
      const scrollPct=Math.round(Math.max(0, Math.min(100, (window.scrollY / maxScroll) * 100)));
      sendEvent('exit', ctaClicked ? 'with_interaction':'bounce', { dur_ms:dur, scroll:scrollPct, cta_clicked:ctaClicked });
    }
    document.addEventListener('visibilitychange', ()=>{ if(document.visibilityState==='hidden') sendExit(); });
    window.addEventListener('beforeunload', sendExit);
  </script>

  <!-- GTM noscript -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PWT63X64" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
</body>
</html>
